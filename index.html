<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Modish Market - Design Platform</title>
<style>
body { font-family: Arial,sans-serif; margin:0; padding:0; direction: ltr; transition:0.3s; }
body.light { background:#fff; color:#000; }
body.dark { background:#121212; color:#fff; }

/* NAVBAR */
.nav { 
  background:#000; 
  color:#FFD700; 
  padding:8px 20px; 
  display:flex; 
  justify-content:space-between; 
  align-items:center; 
}
.nav-left { display:flex; align-items:center; gap:10px; }
.nav-right { display:flex; align-items:center; }

.nav button { 
  background:#FFD700; 
  border:none; 
  padding:6px 10px; 
  border-radius:6px; 
  cursor:pointer; 
  font-weight:bold; 
  margin-left:5px; 
  font-size:18px; 
}
.nav button:hover { background:#FFC107; }
.nav button[title] { font-size:22px; }

/* SECTIONS */
section { display:none; padding:30px; }
section.active { display:block; }

.form-box { max-width:400px; background:#f2f2f2; padding:20px; border-radius:10px; margin:auto; }
.form-box input, .form-box select, .form-box input[type=file] { width:100%; padding:10px; margin:10px 0; border-radius:8px; border:1px solid #999; }
.form-box button { width:100%; padding:10px; background:#000; color:#FFD700; border:none; border-radius:8px; cursor:pointer; font-size:16px; }

body.dark .form-box { background:#1E1E1E; }
body.dark .form-box input, body.dark .form-box select { background:#333; color:#fff; border-color:#666; }
body.dark .form-box button { background:#FFD700; color:#000; }

.designs-container { display:flex; overflow-x:auto; gap:20px; padding-bottom:10px; margin-top:20px; }
.design-card { min-width:200px; background:#f2f2f2; border-radius:10px; padding:10px; text-align:center; flex-shrink:0; }
.design-card button { margin-top:10px; padding:8px 12px; border:none; border-radius:5px; cursor:pointer; background:#000; color:#FFD700; font-weight:bold; }
body.dark .design-card { background:#1E1E1E; }
body.dark .design-card button { background:#FFD700; color:#000; }

.user-info { background:#e0e0e0; padding:15px; border-radius:10px; max-width:400px; margin:auto; margin-bottom:20px; }
body.dark .user-info { background:#333; }

.purchase-list { max-width:500px; margin:auto; background:#f2f2f2; padding:15px; border-radius:10px; }
body.dark .purchase-list { background:#333; color:#fff; }
</style>
</head>
<body class="light">

<!-- NAVBAR -->
<div class="nav">
  <div class="nav-left">
    <div style="font-size:20px; font-weight:bold;">Modish Market</div>
    <button title="Home" onclick="showSection('home')">üè†</button>
    <button title="Designer" onclick="showSection('designerLogin')">üë§</button>
    <button title="Purchases" onclick="showSection('purchases')">üõí</button>
  </div>
  <div class="nav-right">
    <button title="Toggle Dark Mode" onclick="toggleTheme()">üåô</button>
  </div>
</div>

<!-- HOME -->
<section id="home" class="active">
  <h2>Available Designs</h2>
  <div class="designs-container" id="mainDesigns"></div>
</section>

<!-- DESIGNER LOGIN/REGISTER -->
<section id="designerLogin">
  <h2>Designer Access</h2>
  <div class="form-box">
    <input id="designerEmail" type="email" placeholder="Email">
    <input id="designerPass" type="password" placeholder="Password">
    <button onclick="loginDesigner()">Login</button>
    <button onclick="registerDesigner()">Register</button>
  </div>
</section>

<!-- DESIGNER PAGE -->
<section id="designerPage">
  <h2>Your Account</h2>
  <div class="user-info" id="userInfo"></div>
  <div class="user-info">
    <strong>Total Buyers:</strong> <span id="totalSales">0</span>
  </div>

  <h3>Add New Design</h3>
  <div class="form-box">
    <input id="designName" type="text" placeholder="Design Name">
    <input id="designImage" type="file">
    <input id="designPrice" type="number" placeholder="Price ($)">
    <select id="currency">
      <option value="USD">USD</option>
      <option value="EUR">EUR</option>
      <option value="MAD">MAD</option>
    </select>
    <button onclick="addDesign()">Add Design</button>
  </div>

  <h3>Your Designs:</h3>
  <div class="designs-container" id="designerDesigns"></div>
</section>

<!-- PURCHASES -->
<section id="purchases">
  <h2>Purchases</h2>
  <div class="purchase-list" id="purchaseList"></div>
</section>

<script>
function toggleTheme() { document.body.classList.toggle("dark"); document.body.classList.toggle("light"); }
function showSection(id){ document.querySelectorAll("section").forEach(s=>s.classList.remove("active")); document.getElementById(id).classList.add("active"); }

// Designer login
function loginDesigner(){
  const email = document.getElementById("designerEmail").value;
  const pass = document.getElementById("designerPass").value;
  if(!email || !pass){ alert("Please enter email and password"); return; }

  const designerData = JSON.parse(localStorage.getItem("designerData"));
  if(!designerData || designerData.email !== email){
    alert("Account not found. Use Register.");
    return;
  }
  if(designerData.pass !== pass){ alert("Incorrect password"); return; }

  loadDesignerPage();
  showSection("designerPage");
}

// Designer register
function registerDesigner(){
  const email = document.getElementById("designerEmail").value;
  const pass = document.getElementById("designerPass").value;
  if(!email || !pass){ alert("Please enter email and password"); return; }

  let designerData = JSON.parse(localStorage.getItem("designerData")) || {};
  if(designerData.email === email){
    alert("Account already exists. Use Login.");
    return;
  }
  designerData = { email: email, pass: pass, designs: [], totalSales: 0 };
  localStorage.setItem("designerData", JSON.stringify(designerData));
  alert("Account created successfully!");
  loadDesignerPage();
  showSection("designerPage");
}

// Load designer page
function loadDesignerPage(){
  const data = JSON.parse(localStorage.getItem("designerData"));
  if(data){
    document.getElementById("userInfo").innerHTML = `<strong>Email:</strong> ${data.email}`;
    document.getElementById("totalSales").innerText = data.totalSales || 0;

    const container = document.getElementById("designerDesigns");
    container.innerHTML = "";
    data.designs.forEach(d=>{
      container.innerHTML += `<div class="design-card">${d.name}<br>${d.price} ${d.currency}<br>Buyers: ${d.buyers || 0}<br><button onclick="buyDesign('${d.name}','${d.price}','${d.currency}')">Buy Now</button></div>`;
    });

    loadMainDesigns();
    loadPurchases();
  }
}

// Add design
function addDesign(){
  const name = document.getElementById("designName").value;
  const image = document.getElementById("designImage").files[0] ? document.getElementById("designImage").files[0].name : "image.png";
  const price = document.getElementById("designPrice").value;
  const currency = document.getElementById("currency").value;
  if(!name || !price){ alert("Please fill all fields"); return; }

  const data = JSON.parse(localStorage.getItem("designerData"));
  data.designs.push({name, image, price, currency, buyers:0});
  localStorage.setItem("designerData", JSON.stringify(data));

  loadDesignerPage();
}

// Load main designs
function loadMainDesigns(){
  const data = JSON.parse(localStorage.getItem("designerData"));
  const container = document.getElementById("mainDesigns");
  container.innerHTML = "";
  if(data){
    data.designs.forEach(d=>{
      container.innerHTML += `<div class="design-card">${d.name}<br>${d.price} ${d.currency}<br>Buyers: ${d.buyers || 0}<br><button onclick="buyDesign('${d.name}','${d.price}','${d.currency}')">Buy Now</button></div>`;
    });
  }
}

// Buy design
function buyDesign(name, price, currency){
  const sales = JSON.parse(localStorage.getItem("salesLog") || "[]");
  const date = new Date().toLocaleString();
  sales.push({design:name, price:price, currency:currency, date});
  localStorage.setItem("salesLog", JSON.stringify(sales));

  const data = JSON.parse(localStorage.getItem("designerData"));
  data.totalSales = (data.totalSales || 0) + 1;
  data.designs = data.designs.map(d=>{
    if(d.name === name){ d.buyers = (d.buyers || 0) + 1; }
    return d;
  });
  localStorage.setItem("designerData", JSON.stringify(data));

  alert(`Purchased design: ${name} for ${price} ${currency}`);
  loadDesignerPage();
}

// Load purchases
function loadPurchases(){
  const sales = JSON.parse(localStorage.getItem("salesLog") || "[]");
  const container = document.getElementById("purchaseList");
  container.innerHTML = "<h3>Purchases:</h3>";
  sales.forEach((s,i)=>{
    container.innerHTML += `${i+1}. ${s.design} - ${s.price} ${s.currency} - ${s.date}<br>`;
  });
}

// Load designer on start
loadDesignerPage();
</script>
</body>
</html>
