<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>RUN FIT - Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</title>
<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    margin:0;
    font-family:"Cairo",sans-serif;
    direction:rtl;
    background-image:url('https://images.unsplash.com/photo-1599058900985-fd9f93e9f9f1');
    background-size:cover;
    background-attachment:fixed;
    background-position:center;
    color:#333;
  }
  .navbar{
    background:#0a7cff;
    padding:18px 40px;
    color:white;
    display:flex;
    justify-content:space-between;
    font-size:20px;
    font-weight:700;
  }
  .navbar ul{display:flex;list-style:none;gap:25px;}
  .navbar a{color:white;text-decoration:none;font-size:18px;}
  .hero{
    height:75vh;
    background:linear-gradient(135deg,#0084ff,#00c6ff);
    display:flex;
    justify-content:center;
    align-items:center;
    text-align:center;
    color:white;
    padding:30px;
  }
  .hero-content{
    background:rgba(0,0,0,0.45);
    padding:40px;
    border-radius:15px;
  }
  .container{
    max-width:700px;
    margin:40px auto;
    background:white;
    padding:30px;
    border-radius:16px;
    box-shadow:0 5px 18px rgba(0,0,0,0.12);
  }
  input,select{
    width:100%;
    padding:12px;
    border-radius:10px;
    border:1px solid #bbb;
    margin:8px 0;
    font-size:16px;
  }
  button{
    width:100%;
    padding:15px;
    background:#0a7cff;
    color:white;
    border:none;
    border-radius:12px;
    font-size:18px;
    cursor:pointer;
    margin-top:10px;
    transition:0.3s;
  }
  button:hover{background:#006fcc;}
  .result-box,.meal-box{
    margin-top:20px;
    padding:20px;
    border-radius:12px;
    font-size:16px;
  }
  .result-box{background:#e9f4ff;border-right:6px solid #008cff;}
  .meal-box{background:#fff5d7;border-right:6px solid #ffbb00;}
  .history-box{
    margin-top:20px;
    padding:20px;
    background:#fff;
    border-radius:12px;
    box-shadow:0 3px 10px rgba(0,0,0,0.1);
  }
  table{
    width:100%;
    border-collapse:collapse;
    margin-top:20px;
    text-align:center;
  }
  th,td{
    padding:12px;
    border:1px solid #bbb;
  }
  th{background:#0a7cff;color:white;}
  footer{
    margin-top:50px;
    background:#0a7cff;
    color:white;
    padding:20px;
    text-align:center;
  }
</style>
</head>
<body>
<nav class="navbar">
  <div>RUN FIT</div>
  <ul>
    <li><a href="#calc">Ø§Ù„Ø­Ø§Ø³Ø¨Ø©</a></li>
    <li><a href="#history">Ø§Ù„Ø³Ø¬Ù„</a></li>
  </ul>
</nav>

<header class="hero">
  <div class="hero-content">
    <h1>Ø£ÙØ¶Ù„ Ø­Ø§Ø³Ø¨Ø© Ù„Ù„Ø¬Ø±ÙŠ Ùˆ Ø§Ù„Ø­Ù…ÙŠØ©</h1>
    <p>Ø§Ø­Ø³Ø¨ Ù†Ø´Ø§Ø·Ùƒ ÙˆØ§Ø­ØµÙ„ Ø¹Ù„Ù‰ ÙˆØ¬Ø¨Ø§Øª Ù„Ù„ÙˆØµÙˆÙ„ Ù„Ù‡Ø¯ÙÙƒ Ù…Ù† Ø§Ù„Ø³Ø¹Ø±Ø§Øª ÙˆØ§Ù„Ù…ØºØ°ÙŠØ§Øª.</p>
    <a href="#calc" style="padding:10px 20px;background:#ffbb00;color:#333;border-radius:10px;text-decoration:none;font-weight:700;">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ø¢Ù†</a>
  </div>
</header>

<div class="container" id="calc">
  <h2>Ø­Ø§Ø³Ø¨Ø© Ø§Ù„Ø¬Ø±ÙŠ + Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØ¬Ø¨Ø§Øª ÙˆØ§Ù„Ù…ØºØ°ÙŠØ§Øª</h2>
  <label>Ø§Ù„Ø¹Ù…Ø±:</label><input type="number" id="age" placeholder="Ø£Ø¯Ø®Ù„ Ø¹Ù…Ø±Ùƒ"/>
  <label>Ø§Ù„ÙˆØ²Ù† (ÙƒØº):</label><input type="number" id="weight" placeholder="ÙˆØ²Ù†Ùƒ"/>
  <label>Ø§Ù„Ø·ÙˆÙ„ (Ø³Ù…):</label><input type="number" id="height" placeholder="Ø·ÙˆÙ„Ùƒ"/>
  <label>Ø§Ù„Ø¬Ù†Ø³:</label>
  <select id="gender">
    <option value="male">Ø°ÙƒØ±</option>
    <option value="female">Ø£Ù†Ø«Ù‰</option>
  </select>
  <label>Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù…Ø±Ø§Ø¯ Ø­Ø±Ù‚Ù‡Ø§ Ø§Ù„ÙŠÙˆÙ…:</label><input type="number" id="cal" placeholder="Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ø¹Ø±Ø§Øª"/>
  <label>Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø±ÙŠ (ÙƒÙ…/Ø³Ø§Ø¹Ø©):</label><input type="number" id="speed" placeholder="Ø³Ø±Ø¹Ø© Ø§Ù„Ø¬Ø±ÙŠ"/>

  <label>Ø§Ø®ØªØ± ÙˆØ¬Ø¨Ø§ØªÙƒ Ù„Ù„ÙŠÙˆÙ…:</label>
  <select id="mealPlan" multiple size="6">
    <option value="350" data-protein="15" data-carb="45" data-fat="10">ÙØ·ÙˆØ±: Ø´ÙˆÙØ§Ù† + Ù…ÙˆØ² + Ø­Ù„ÙŠØ¨ (350 Ø³Ø¹Ø±Ø©)</option>
    <option value="500" data-protein="35" data-carb="50" data-fat="12">ØºØ¯Ø§Ø¡: Ø¯Ø¬Ø§Ø¬ Ù…Ø´ÙˆÙŠ + Ø£Ø±Ø² (500 Ø³Ø¹Ø±Ø©)</option>
    <option value="450" data-protein="30" data-carb="40" data-fat="15">ØºØ¯Ø§Ø¡: Ø³Ù…Ùƒ + Ø³Ù„Ø·Ø© (450 Ø³Ø¹Ø±Ø©)</option>
    <option value="300" data-protein="25" data-carb="20" data-fat="8">Ø¹Ø´Ø§Ø¡: ØªÙˆÙ†Ø© + Ø®Ø¨Ø² ÙƒØ§Ù…Ù„ (300 Ø³Ø¹Ø±Ø©)</option>
    <option value="200" data-protein="6" data-carb="25" data-fat="10">Ø³Ù†Ø§Ùƒ: Ù„ÙˆØ² + ØªÙØ§Ø­Ø© (200 Ø³Ø¹Ø±Ø©)</option>
    <option value="150" data-protein="8" data-carb="12" data-fat="5">Ø³Ù†Ø§Ùƒ: Ø²Ø¨Ø§Ø¯ÙŠ (150 Ø³Ø¹Ø±Ø©)</option>
  </select>

  <button onclick="calculate()">Ø§Ø­Ø³Ø¨ Ø§Ù„Ø¢Ù†</button>

  <div id="result" class="result-box"></div>
  <div id="mealResult" class="meal-box"></div>

  <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØºØ°ÙŠØ§Øª Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§ -->
  <div id="nutritionTable">
    <h2>ğŸ“Š Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØºØ°ÙŠØ§Øª Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§</h2>
    <table id="nutriTable">
      <thead>
        <tr><th>Ø§Ù„Ù…ØºØ°ÙŠØ§Øª</th><th>Ø§Ù„ÙƒÙ…ÙŠØ© Ø§Ù„ÙŠÙˆÙ…ÙŠØ© Ø§Ù„Ù…ÙˆØµÙ‰ Ø¨Ù‡Ø§</th></tr>
      </thead>
      <tbody>
        <tr><td>Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† (Øº)</td><td id="proteinRec">-</td></tr>
        <tr><td>Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª (Øº)</td><td id="carbRec">-</td></tr>
        <tr><td>Ø§Ù„Ø¯Ù‡ÙˆÙ† (Øº)</td><td id="fatRec">-</td></tr>
      </tbody>
    </table>
  </div>
</div>

<div class="container" id="history">
  <h2>ğŸ“Œ Ø³Ø¬Ù„ ØªØ¯Ø±ÙŠØ¨Ø§ØªÙƒ</h2>
  <canvas id="chart" height="140"></canvas>
  <div id="historyBox" class="history-box"></div>
</div>

<footer>Â© 2025 RUN FIT â€” Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø§Ø­ØªØ±Ø§ÙÙŠØ©</footer>

<script>
let runHistory = JSON.parse(localStorage.getItem("runHistory") || "[]");
let chart;

function calculate() {
  let age = +document.getElementById("age").value;
  let weight = +document.getElementById("weight").value;
  let height = +document.getElementById("height").value;
  let calories = +document.getElementById("cal").value;
  let speed = +document.getElementById("speed").value;
  let mealsOpts = Array.from(document.getElementById("mealPlan").selectedOptions);

  if (!age || !weight || !height || !calories || !speed) {
    document.getElementById("result").innerHTML = "âš  Ø§Ù„Ø±Ø¬Ø§Ø¡ Ù…Ù„Ø¡ ÙƒÙ„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª.";
    return;
  }

  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ø³Ø¹Ø±Ø§Øª Ø§Ù„Ù…Ø­Ø±ÙˆÙ‚Ø© Ø¨Ø¯Ù‚Ø© Ø£ÙƒØ¨Ø± (MET Ù…ØªÙˆØ³Ø· 8 Ù„Ù„Ø¬Ø±ÙŠ)
  let MET = 8;
  let timeHrs = calories / (MET * weight);
  let distance = speed * timeHrs;
  let timeMinutes = timeHrs * 60;
  let pace = 60 / speed;
  let vo2 = (speed * 3.5).toFixed(1);

  // Ø­Ø³Ø§Ø¨ Ø§Ù„Ù…ØºØ°ÙŠØ§Øª
  let totalProtein = mealsOpts.reduce((a,o)=>a+Number(o.dataset.protein),0);
  let totalCarb = mealsOpts.reduce((a,o)=>a+Number(o.dataset.carb),0);
  let totalFat = mealsOpts.reduce((a,o)=>a+Number(o.dataset.fat),0);
  let mealsTotal = mealsOpts.reduce((a,o)=>a+Number(o.value),0);
  let remaining = calories - mealsTotal;

  document.getElementById("result").innerHTML = `
    âœ” Ø§Ù„Ù…Ø³Ø§ÙØ© Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©: <b>${distance.toFixed(2)} ÙƒÙ…</b><br>
    âœ” Ø§Ù„Ø²Ù…Ù† Ø§Ù„Ù…Ø·Ù„ÙˆØ¨: <b>${timeMinutes.toFixed(1)} Ø¯Ù‚ÙŠÙ‚Ø©</b><br>
    âœ” Ø§Ù„Ù€ Pace: <b>${pace.toFixed(2)} Ø¯Ù‚ÙŠÙ‚Ø©/ÙƒÙ…</b><br>
    âœ” VOâ‚‚ Max: <b>${vo2}</b><br>
    âœ” Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ø³Ø¹Ø±Ø§Øª ÙˆØ¬Ø¨Ø§ØªÙƒ: <b>${mealsTotal}</b><br>
    âœ” Ø§Ù„Ø¨Ø±ÙˆØªÙŠÙ† Ø§Ù„ÙƒÙ„ÙŠ: <b>${totalProtein} Øº</b><br>
    âœ” Ø§Ù„ÙƒØ±Ø¨ÙˆÙ‡ÙŠØ¯Ø±Ø§Øª Ø§Ù„ÙƒÙ„ÙŠØ©: <b>${totalCarb} Øº</b><br>
    âœ” Ø§Ù„Ø¯Ù‡ÙˆÙ† Ø§Ù„ÙƒÙ„ÙŠØ©: <b>${totalFat} Øº</b>
  `;

  document.getElementById("mealResult").innerHTML = remaining > 0
    ? `<span style="color:green">ğŸ½ Ù„Ø§Ø²Ù„Øª ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ <b>${remaining}</b> Ø³Ø¹Ø±Ø©</span>`
    : `<span style="color:red">ğŸ”¥ Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª Ù‡Ø¯ÙÙƒ Ø¨Ù€ <b>${Math.abs(remaining)}</b> Ø³Ø¹Ø±Ø©</span>`;

  // ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØºØ°ÙŠØ§Øª
  updateNutritionTable();

  // Ø­ÙØ¸ Ø§Ù„ØªØ§Ø±ÙŠØ®
  runHistory.push({distance: distance.toFixed(2),calories,speed,date:new Date().toLocaleString()});
  localStorage.setItem("runHistory", JSON.stringify(runHistory));
  updateHistory();
  drawChart();
}

// ØªØ­Ø¯ÙŠØ« Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…ØºØ°ÙŠØ§Øª
function updateNutritionTable() {
  let weight = +document.getElementById("weight").value;
  if (!weight) return;
  let protein = Math.round(weight * 1.5);
  let carbs = Math.round(weight * 4);
  let fat = Math.round(weight * 0.9);

  document.getElementById("proteinRec").innerText = protein;
  document.getElementById("carbRec").innerText = carbs;
  document.getElementById("fatRec").innerText = fat;
}

// Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ Ø§Ù„ØªØ­Ø¯ÙŠØ« Ø¹Ù†Ø¯ ØªØºÙŠÙŠØ± Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª
document.getElementById("age").addEventListener("input", updateNutritionTable);
document.getElementById("weight").addEventListener("input", updateNutritionTable);
document.getElementById("height").addEventListener("input", updateNutritionTable);

function updateHistory(){
  let html="";
  runHistory.forEach(e=>{
    html+=`<p>ğŸƒ Ù…Ø³Ø§ÙØ©: <b>${e.distance} ÙƒÙ…</b> â€” ğŸ”¥ Ø³Ø¹Ø±Ø§Øª: <b>${e.calories}</b> â€” âš¡ Ø³Ø±Ø¹Ø©: <b>${e.speed}</b> â€” ğŸ“… ${e.date}</p><hr>`;
  });
  document.getElementById("historyBox").innerHTML = html;
}

function drawChart(){
  let ctx = document.getElementById("chart");
  if(chart) chart.destroy();
  chart = new Chart(ctx,{
    type:"line",
    data:{
      labels:runHistory.map(e=>e.date),
      datasets:[
        {label:"Ø§Ù„Ù…Ø³Ø§ÙØ© (ÙƒÙ…)",data:runHistory.map(e=>e.distance),borderColor:"#0a7cff",backgroundColor:"rgba(10,124,255,0.2)",borderWidth:3,fill:true},
        {label:"Ø§Ù„Ø³Ø¹Ø±Ø§Øª",data:runHistory.map(e=>e.calories),borderColor:"#ffbb00",backgroundColor:"rgba(255,187,0,0.2)",borderWidth:3,fill:true},
        {label:"Ø§Ù„Ø³Ø±Ø¹Ø© (ÙƒÙ…/Ø³)",data:runHistory.map(e=>e.speed),borderColor:"#00c6ff",backgroundColor:"rgba(0,198,255,0.2)",borderWidth:3,fill:true}
      ]
    },
    options:{scales:{y:{beginAtZero:true}}}
  });
}

updateHistory();
drawChart();
</script>
</body>
</html>
